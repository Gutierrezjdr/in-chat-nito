(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},43:function(e,t,a){e.exports=a(87)},50:function(e,t,a){},83:function(e,t){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(8),r=a.n(o),c=a(24),i=a(9),u=a.n(i),l=a(23),m=a(3),h=a(4),g=a(6),f=a(5),p=a(7),d=(a(10),a(50),function(e){return s.a.createElement("div",{className:"container"},s.a.createElement("h3",{className:"title"},"IN CHAT NITO"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-5 image-container"}),s.a.createElement("div",{className:"col-xs-7 form-container"},s.a.createElement("form",{onSubmit:e.getUsername},s.a.createElement("h4",null,"Login"),s.a.createElement("input",{id:"login_input",type:"text",name:"name",className:"login-button",placeholder:"ENTER USERNAME"}),s.a.createElement("button",{type:"submit",id:"getData",className:"btn"},"Submit"),s.a.createElement("p",{id:"login_error"})),s.a.createElement("form",{className:"SignUponSubmit",onSubmit:e.createUsername},s.a.createElement("h4",null,"Sign Up"),s.a.createElement("input",{id:"login_input",type:"text",name:"new_username",className:"login-button",placeholder:"ENTER NEW USERNAME"}),s.a.createElement("button",{id:"getData",className:"SignUpbtn"},"Submit"),s.a.createElement("p",{id:"signup_error"})))))}),v=a(40),S=a.n(v);var b=function(e){return s.a.createElement("div",{class:"course-title"},s.a.createElement("h4",null,"Here are the courses you are enrolled in: "),s.a.createElement("div",{className:"courses_sec"},e.courses.map(function(t){return s.a.createElement(S.a,{className:"courses_btn",onClick:function(){e.switchToChat(),e.handleRoomClick(t.courseID)},key:t.courseID},t.courseName)})))},E=function(e){return s.a.createElement("form",{onSubmit:e.logOut},s.a.createElement("button",{className:"navbtn1"},"Logout"))},y=function(e){return s.a.createElement("div",{className:"navbtn"},s.a.createElement("form",null,s.a.createElement("button",{className:"navbtn",onClick:e.backToCourses},"Courses"),s.a.createElement("button",{className:"navbtn",onClick:e.logOut},"Logout")))},C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).state={text:""},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={from:this.props.name,text:this.state.text};this.props.onMessageSubmit(t),this.setState({text:""})}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"MessageForm",onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("input",{className:"MessageInput",onChange:function(t){return e.handleChange(t)},value:this.state.text,placeholder:"Message"}))}}]),t}(n.Component),O=a(41),N=function(e){return s.a.createElement("div",{className:"Message"+(e.from===e.name?" MessageRight":"")},s.a.createElement("strong",null,e.last===e.from?"":e.from===e.name?"You":e.from),s.a.createElement("span",{className:"Cloud"+(e.from===e.name?" CloudRight":"")},e.text))},k=function(e){function t(e){return Object(m.a)(this,t),Object(g.a)(this,Object(f.a)(t).call(this,e))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"loadMessages",value:function(){O.Socket.emit("load messages")}},{key:"componentWillUpdate",value:function(){var e=r.a.findDOMNode(this);this.shouldScrollBottom=e.scrollTop+e.offsetHeight===e.scrollHeight}},{key:"componentDidUpdate",value:function(){if(this.shouldScrollBottom){var e=r.a.findDOMNode(this);e.scrollTop=e.scrollHeight}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"MessageList"},this.props.messages.map(function(t,a){return s.a.createElement(N,{key:a,from:t.from,text:t.text,name:e.props.name,last:a>0?e.props.messages[a-1].from:""})}))}}]),t}(s.a.Component);var T=a(42),j=a.n(T)()("/"),w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleRoomClick=function(e){var t=e;j.emit("join room",t),a.setState({room:t}),console.log(a.state.messages),console.log("room "+t+" was clicked"),a.setState({page:"chat"}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"page",value:"chat"}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Chat set as page.")}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"room",value:t}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Chat set as page.")})},a.getUsername=function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.elements.name.value,console.log(n),fetch("/login/".concat(n),{method:"POST",header:n}).then(function(e){if(console.log(e.status),404===e.status){document.getElementById("login_error").innerHTML="No user found."}200===e.status&&(a.setState({name:n}),a.handleUserSubmit(n),fetch("/courses",{method:"POST"}).then(function(e){return e.json()}).then(function(e){a.setState({courses:e}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"courses",value:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set to Courses.")})}).then(function(e){return console.log(a.state.courses)}))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.createUsername=function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.elements.new_username.value,console.log(n),fetch("/signup/".concat(n),{method:"GET",header:n}).then(function(e){if(console.log(e.status),404===e.status){document.getElementById("signup_error").innerHTML="Username already exists."}if(200===e.status){fetch("/courses",{method:"POST"}).then(function(e){return e.json()}).then(function(e){return a.setState({courses:e})}).then(function(e){return console.log(a.state.courses)}),a.setState({name:n}),a.handleUserSubmit(n)}}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"page",value:"courses"}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log(e)});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.logOut=function(e){e.preventDefault(),fetch("/logout",{method:"POST"}).then(function(e){a.setState({name:void 0,activeChat:!1})}).then(function(e){j.on("disconnect",function(){a.setState({users:[],activeChat:!1,courses:[],messages:[],text:"",name:void 0})})}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"page",value:"login"}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set as login")})},a.backToCourses=function(e){a.setState({page:"courses",activeChat:!1,messages:[]}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"page",value:"courses"}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set as courses.")}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"activeChat",value:!1}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set as courses.")})},a.switchToChat=function(e){a.setState({activeChat:!0})},a.state={name:void 0,activeChat:!1,page:"",users:[],courses:[],messages:[],text:"",room:""},a.onDisconnectStatus="",a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.on("message",function(t){return e.messageReceive(t)}),j.on("update",function(t){var a=t.users;return e.chatUpdate(a)}),fetch("/cookies",{method:"GET"}).then(function(e){return e.json()}).then(function(t){console.log("Got cookies page "+t.page),console.log(e.state),"courses"===t.page?e.setState({page:t.page,name:t.username,courses:t.courses,activeChat:!1}):"chat"===t.page?(e.setState({page:t.page,activeChat:!0,name:t.username,room:t.room,courses:t.courses,messages:t.messages}),console.log(e.state)):e.setState({activeChat:!1,name:void 0})})}},{key:"messageReceive",value:function(e){var t=[].concat(Object(c.a)(this.state.messages),[e]);this.setState({messages:t}),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"messages",value:t}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set to Courses.")})}},{key:"chatUpdate",value:function(e){this.setState({users:e})}},{key:"handleUserSubmit",value:function(e){e&&(this.setState({name:e}),j.emit("join",e)),fetch("/cookies",{method:"POST",body:JSON.stringify({input:"page",value:"courses"}),headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Page set to Courses.")})}},{key:"handleMessageSubmit",value:function(e){if(e.text){var t=[].concat(Object(c.a)(this.state.messages),[e]);this.setState({messages:t}),j.emit("message",e)}}},{key:"renderHomePage",value:function(){return s.a.createElement("div",{className:"wrapper"},s.a.createElement(d,{getUsername:this.getUsername,createUsername:this.createUsername}))}},{key:"renderChat",value:function(){var e=this;return s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"title"},s.a.createElement("h4",null,"Chat Page "),s.a.createElement("h2",null,"Room ",this.state.room)),s.a.createElement("div",{className:"col-xs-5 image-container"},s.a.createElement(y,{logOut:this.logOut,backToCourses:this.backToCourses})),s.a.createElement("div",{className:"col-xs-7 form-container-nav"},s.a.createElement("div",{className:"MessageWrapper"},s.a.createElement(k,{messages:this.state.messages,name:this.state.name,last:this.state.messages[this.state.messages.length-2]}),s.a.createElement(C,{onMessageSubmit:function(t){return e.handleMessageSubmit(t)},name:this.state.name}))))))}},{key:"renderCoursePage",value:function(){return s.a.createElement("div",{className:"wrapper"},s.a.createElement(E,{logOut:this.logOut}),s.a.createElement(b,{switchToChat:this.switchToChat,courses:this.state.courses,handleRoomClick:this.handleRoomClick}))}},{key:"render",value:function(){return void 0===this.state.name&&!1===this.state.activeChat?this.renderHomePage():void 0!==this.state.name&&!1===this.state.activeChat?this.renderCoursePage():this.renderChat()}}]),t}(s.a.Component);a(86),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,1,2]]]);
//# sourceMappingURL=main.0cf58c7b.chunk.js.map